<Page x:Class="AppKolHaNoar.Presentation.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:AppKolHaNoar.Services"
      xmlns:uen="using:Uno.Extensions.Navigation.UI"
      xmlns:utu="using:Uno.Toolkit.UI"
      xmlns:um="using:Uno.Material"
      NavigationCacheMode="Required"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
      >
  <ScrollViewer>
    <Grid utu:SafeArea.Insets="VisibleBounds">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition />
      </Grid.RowDefinitions>
      <utu:NavigationBar Content="{Binding Title}" />

      <StackPanel Grid.Row="1"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Spacing="16">
        <!--<TextBox Text="{Binding Name, Mode=TwoWay}"
            PlaceholderText="Enter your name:" />
        <Button Content="Go to Second Page"
            AutomationProperties.AutomationId="SecondPageButton"
            Command="{Binding GoToSecond}" />-->
                <ComboBox x:Name="comboBoxChannel" Width="150" Height="30" ItemsSource="{Binding Channels}"
                 DisplayMemberPath="ChannelExtension_Name" 
                  SelectedItem="{Binding SelectedChannel, Mode=TwoWay}" />

                <!-- Row 2 -->
                <Button Content="הוספת ערוץ" Grid.Column="1" Grid.Row="1" Margin="10" Click="AddChannel" />
           
                <!-- Row 3 -->

                <!-- Row 4 -->
                <Button Content="שינוי סיסמה" Grid.Column="1" Grid.Row="3" Margin="10" />
                <Button Content="הפעל קמפיין" Grid.Column="0" Grid.Row="3" Margin="10" Click="RunCampaign" />
                <!--<AutoSuggestBox x:Name="comboBox" Width="200" Height="30"
                            PlaceholderText="חפש פריט..."
                                Text="{Binding AutoSuggestVM.SelectedText, Mode=TwoWay}"
     ItemsSource="{Binding AutoSuggestVM.FilteredItems}"
                                  TextChanged="AutoSuggestBox_TextChanged"
     SuggestionChosen="AutoSuggestBox_SuggestionChosen"
     LostFocus="AutoSuggestBox_LostFocus"
Style="{StaticResource CustomAutoSuggestBoxStyle}" />-->
                <AutoSuggestBox
                    x:Name="autoSuggestBox"
            PlaceholderText="בחר פריט מהרשימה..."
            Text="{Binding AutoSuggestVM.SelectedText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
            ItemsSource="{Binding AutoSuggestVM.Items}"
            TextChanged="AutoSuggestBox_TextChanged"
            SuggestionChosen="AutoSuggestBox_SuggestionChosen"
            LostFocus="AutoSuggestBox_LostFocus"/>

                <!-- Row 5 -->
                <Button x:Name="BBb" Content="בצע בדיקה לערוץ" Grid.Column="1" Grid.Row="4" Margin="10" Command="{Binding SendSelectedChannelCommand,Mode=TwoWay}" />
                <!--<Button Content="בצע בדיקה לערוץ" Grid.Column="1" Grid.Row="4" Margin="10" Click="UpdateExtension" />-->


                <Button x:Name="ChangeDB" Content="שנה" Grid.Column="0" Grid.Row="4" Margin="10" Command="{Binding SendSelectedinfoCommand,Mode=TwoWay}" />
            </StackPanel>
            <ProgressRing x:Name="loadingRing" HorizontalAlignment="Center" VerticalAlignment="Center" IsActive="False"/>

        </Grid>
      
  </ScrollViewer>
 
</Page>

